<?xml version="1.0" encoding="UTF-8"?>
<bpmn:definitions xmlns:bpmn="http://www.omg.org/spec/BPMN/20100524/MODEL" xmlns:bpmndi="http://www.omg.org/spec/BPMN/20100524/DI" xmlns:dc="http://www.omg.org/spec/DD/20100524/DC" xmlns:camunda="http://camunda.org/schema/1.0/bpmn" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:di="http://www.omg.org/spec/DD/20100524/DI" id="Definitions_0raddm4" targetNamespace="http://bpmn.io/schema/bpmn" exporter="Camunda Modeler" exporterVersion="3.3.1">
  <bpmn:process id="TP_NET_INTERACTION" name="TP_NET_INTERACTION" isExecutable="true">
    <bpmn:startEvent id="startEvent">
      <bpmn:outgoing>SequenceFlow_1i87eit</bpmn:outgoing>
    </bpmn:startEvent>
    <bpmn:exclusiveGateway id="resolveSequence" camunda:asyncBefore="true" camunda:exclusive="false">
      <bpmn:incoming>SequenceFlow_1i87eit</bpmn:incoming>
      <bpmn:outgoing>depositSequence</bpmn:outgoing>
      <bpmn:outgoing>giveAwaySequence</bpmn:outgoing>
    </bpmn:exclusiveGateway>
    <bpmn:endEvent id="endEvent3">
      <bpmn:incoming>SequenceFlow_0t15nka</bpmn:incoming>
    </bpmn:endEvent>
    <bpmn:sequenceFlow id="SequenceFlow_1i87eit" sourceRef="startEvent" targetRef="resolveSequence" />
    <bpmn:sendTask id="placeTpNetDepositTask" name="Place TPNET deposit" camunda:asyncBefore="true" camunda:exclusive="false" camunda:delegateExpression="${placeTpNetDepositTask}">
      <bpmn:extensionElements>
        <camunda:failedJobRetryTimeCycle>R3/PT5M</camunda:failedJobRetryTimeCycle>
      </bpmn:extensionElements>
      <bpmn:incoming>SequenceFlow_09x881f</bpmn:incoming>
      <bpmn:incoming>depositSequence</bpmn:incoming>
      <bpmn:outgoing>SequenceFlow_0y7etgt</bpmn:outgoing>
    </bpmn:sendTask>
    <bpmn:receiveTask id="receiveTpNetDepositSuccessTask" name="Receive TPNET deposit success" camunda:asyncAfter="true" camunda:exclusive="false" messageRef="Message_0gjnmf1">
      <bpmn:incoming>SequenceFlow_0y7etgt</bpmn:incoming>
      <bpmn:outgoing>SequenceFlow_0kf0jcn</bpmn:outgoing>
    </bpmn:receiveTask>
    <bpmn:sendTask id="createTpNetDepositItsmTicketTask" name="Create ITSM incident" camunda:asyncBefore="true" camunda:exclusive="false" camunda:delegateExpression="${createTpnetItsmTicketTask}">
      <bpmn:extensionElements>
        <camunda:inputOutput>
          <camunda:inputParameter name="tpnetOperationType">${incidentType}</camunda:inputParameter>
        </camunda:inputOutput>
        <camunda:failedJobRetryTimeCycle>R3/PT15M</camunda:failedJobRetryTimeCycle>
      </bpmn:extensionElements>
      <bpmn:incoming>Flow_1ss89y5</bpmn:incoming>
      <bpmn:outgoing>SequenceFlow_11kuwz4</bpmn:outgoing>
    </bpmn:sendTask>
    <bpmn:endEvent id="endEvent2">
      <bpmn:incoming>SequenceFlow_11kuwz4</bpmn:incoming>
    </bpmn:endEvent>
    <bpmn:userTask id="tpNetDepositHumanTask" name="Solve issue with TPNET deposit">
      <bpmn:incoming>SequenceFlow_0b662wc</bpmn:incoming>
      <bpmn:outgoing>SequenceFlow_09x881f</bpmn:outgoing>
    </bpmn:userTask>
    <bpmn:boundaryEvent id="receiveTpNetSuccessDepositTimer" name="20 min" cancelActivity="false" attachedToRef="receiveTpNetDepositSuccessTask">
      <bpmn:outgoing>Flow_1ss89y5</bpmn:outgoing>
      <bpmn:timerEventDefinition id="TimerEventDefinition_1prsfp4">
        <bpmn:timeDuration xsi:type="bpmn:tFormalExpression">PT20M</bpmn:timeDuration>
      </bpmn:timerEventDefinition>
    </bpmn:boundaryEvent>
    <bpmn:boundaryEvent id="receiveTpNetDepositFailTask" name="Place TPNET deposit error" camunda:asyncAfter="true" camunda:exclusive="false" attachedToRef="receiveTpNetDepositSuccessTask">
      <bpmn:outgoing>SequenceFlow_0b662wc</bpmn:outgoing>
      <bpmn:messageEventDefinition id="MessageEventDefinition_15x67d4" messageRef="Message_0akboct" />
    </bpmn:boundaryEvent>
    <bpmn:sequenceFlow id="SequenceFlow_0y7etgt" sourceRef="placeTpNetDepositTask" targetRef="receiveTpNetDepositSuccessTask" />
    <bpmn:sequenceFlow id="SequenceFlow_0b662wc" sourceRef="receiveTpNetDepositFailTask" targetRef="tpNetDepositHumanTask" />
    <bpmn:sequenceFlow id="SequenceFlow_11kuwz4" sourceRef="createTpNetDepositItsmTicketTask" targetRef="endEvent2" />
    <bpmn:sequenceFlow id="SequenceFlow_09x881f" sourceRef="tpNetDepositHumanTask" targetRef="placeTpNetDepositTask" />
    <bpmn:sequenceFlow id="depositSequence" name="Deposit Sequence" sourceRef="resolveSequence" targetRef="placeTpNetDepositTask">
      <bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${tpNetType == "DEPOSIT"}</bpmn:conditionExpression>
    </bpmn:sequenceFlow>
    <bpmn:sendTask id="placeTpNetGiveAwayTask" name="Place TPNET giveaway" camunda:asyncBefore="true" camunda:exclusive="false" camunda:delegateExpression="${processTpNetGiveAwayTask}">
      <bpmn:extensionElements>
        <camunda:failedJobRetryTimeCycle>R3/PT5M</camunda:failedJobRetryTimeCycle>
      </bpmn:extensionElements>
      <bpmn:incoming>SequenceFlow_1gnh1mh</bpmn:incoming>
      <bpmn:incoming>giveAwaySequence</bpmn:incoming>
      <bpmn:outgoing>SequenceFlow_0lkp32b</bpmn:outgoing>
    </bpmn:sendTask>
    <bpmn:receiveTask id="receiveTpNetGiveAwaySuccessTask" name="Receive TPNET giveaway success" camunda:asyncAfter="true" camunda:exclusive="false" messageRef="Message_06by7fh">
      <bpmn:incoming>SequenceFlow_0lkp32b</bpmn:incoming>
      <bpmn:outgoing>SequenceFlow_0t15nka</bpmn:outgoing>
    </bpmn:receiveTask>
    <bpmn:userTask id="tpNetGiveAwayHumanTask" name="Solve issue with TPNET giveaway">
      <bpmn:incoming>SequenceFlow_1nqew13</bpmn:incoming>
      <bpmn:outgoing>SequenceFlow_1gnh1mh</bpmn:outgoing>
    </bpmn:userTask>
    <bpmn:boundaryEvent id="receiveTpNetGiveAwayFailTask" name="Place TPNET giveaway error" camunda:asyncAfter="true" camunda:exclusive="false" attachedToRef="receiveTpNetGiveAwaySuccessTask">
      <bpmn:outgoing>SequenceFlow_1nqew13</bpmn:outgoing>
      <bpmn:messageEventDefinition id="MessageEventDefinition_1suhqy1" messageRef="Message_1bivntr" />
    </bpmn:boundaryEvent>
    <bpmn:sequenceFlow id="SequenceFlow_1gnh1mh" sourceRef="tpNetGiveAwayHumanTask" targetRef="placeTpNetGiveAwayTask" />
    <bpmn:sequenceFlow id="SequenceFlow_0lkp32b" sourceRef="placeTpNetGiveAwayTask" targetRef="receiveTpNetGiveAwaySuccessTask" />
    <bpmn:sequenceFlow id="SequenceFlow_1nqew13" sourceRef="receiveTpNetGiveAwayFailTask" targetRef="tpNetGiveAwayHumanTask" />
    <bpmn:sequenceFlow id="giveAwaySequence" name="GiveAway Sequence" sourceRef="resolveSequence" targetRef="placeTpNetGiveAwayTask">
      <bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${tpNetType == "GIVEAWAY"}</bpmn:conditionExpression>
    </bpmn:sequenceFlow>
    <bpmn:sequenceFlow id="SequenceFlow_0t15nka" sourceRef="receiveTpNetGiveAwaySuccessTask" targetRef="endEvent3" />
    <bpmn:boundaryEvent id="receiveTpNetSuccessGiveAwayTimer" name="20 min" cancelActivity="false" attachedToRef="receiveTpNetGiveAwaySuccessTask">
      <bpmn:outgoing>Flow_05p68zp</bpmn:outgoing>
      <bpmn:timerEventDefinition id="TimerEventDefinition_12htqzq">
        <bpmn:timeDuration xsi:type="bpmn:tFormalExpression">PT20M</bpmn:timeDuration>
      </bpmn:timerEventDefinition>
    </bpmn:boundaryEvent>
    <bpmn:sendTask id="createTpNetGiveAwayItsmTicketTask" name="Create ITSM incident" camunda:asyncBefore="true" camunda:exclusive="false" camunda:delegateExpression="${createTpnetItsmTicketTask}">
      <bpmn:extensionElements>
        <camunda:inputOutput>
          <camunda:inputParameter name="tpnetOperationType">${incidentType}</camunda:inputParameter>
        </camunda:inputOutput>
        <camunda:failedJobRetryTimeCycle>R3/PT15M</camunda:failedJobRetryTimeCycle>
      </bpmn:extensionElements>
      <bpmn:incoming>Flow_05p68zp</bpmn:incoming>
      <bpmn:outgoing>SequenceFlow_1o1udbj</bpmn:outgoing>
    </bpmn:sendTask>
    <bpmn:endEvent id="endEvent4">
      <bpmn:incoming>SequenceFlow_1o1udbj</bpmn:incoming>
    </bpmn:endEvent>
    <bpmn:sequenceFlow id="SequenceFlow_1o1udbj" sourceRef="createTpNetGiveAwayItsmTicketTask" targetRef="endEvent4" />
    <bpmn:endEvent id="endEvent1">
      <bpmn:incoming>SequenceFlow_0kf0jcn</bpmn:incoming>
    </bpmn:endEvent>
    <bpmn:sequenceFlow id="SequenceFlow_0kf0jcn" sourceRef="receiveTpNetDepositSuccessTask" targetRef="endEvent1" />
    <bpmn:sequenceFlow id="Flow_1ss89y5" sourceRef="receiveTpNetSuccessDepositTimer" targetRef="createTpNetDepositItsmTicketTask" />
    <bpmn:sequenceFlow id="Flow_05p68zp" sourceRef="receiveTpNetSuccessGiveAwayTimer" targetRef="createTpNetGiveAwayItsmTicketTask" />
  </bpmn:process>
  <bpmn:message id="Message_06by7fh" name="tpnetGiveAwaySuccess" />
  <bpmn:message id="Message_0gjnmf1" name="tpnetDepositSuccess" />
  <bpmn:message id="Message_0akboct" name="tpnetDepositFail" />
  <bpmn:message id="Message_1bivntr" name="tpnetGiveAwayFail" />
  <bpmndi:BPMNDiagram id="BPMNDiagram_1">
    <bpmndi:BPMNPlane id="BPMNPlane_1" bpmnElement="TP_NET_INTERACTION">
      <bpmndi:BPMNEdge id="Flow_05p68zp_di" bpmnElement="Flow_05p68zp">
        <di:waypoint x="640" y="528" />
        <di:waypoint x="640" y="639" />
        <di:waypoint x="698" y="639" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_1ss89y5_di" bpmnElement="Flow_1ss89y5">
        <di:waypoint x="631" y="207" />
        <di:waypoint x="631" y="300" />
        <di:waypoint x="698" y="300" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="SequenceFlow_0kf0jcn_di" bpmnElement="SequenceFlow_0kf0jcn">
        <di:waypoint x="656" y="149" />
        <di:waypoint x="853" y="149" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="SequenceFlow_1o1udbj_di" bpmnElement="SequenceFlow_1o1udbj">
        <di:waypoint x="798" y="639" />
        <di:waypoint x="853" y="639" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="SequenceFlow_0t15nka_di" bpmnElement="SequenceFlow_0t15nka">
        <di:waypoint x="667" y="470" />
        <di:waypoint x="853" y="470" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="SequenceFlow_1e8t3ab_di" bpmnElement="giveAwaySequence">
        <di:waypoint x="230" y="405" />
        <di:waypoint x="230" y="470" />
        <di:waypoint x="400" y="470" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="255" y="435" width="50" height="27" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="SequenceFlow_1nqew13_di" bpmnElement="SequenceFlow_1nqew13">
        <di:waypoint x="593" y="528" />
        <di:waypoint x="593" y="639" />
        <di:waypoint x="500" y="639" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="SequenceFlow_0lkp32b_di" bpmnElement="SequenceFlow_0lkp32b">
        <di:waypoint x="500" y="470" />
        <di:waypoint x="567" y="470" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="SequenceFlow_1gnh1mh_di" bpmnElement="SequenceFlow_1gnh1mh">
        <di:waypoint x="450" y="599" />
        <di:waypoint x="450" y="510" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="SequenceFlow_0i8buym_di" bpmnElement="depositSequence">
        <di:waypoint x="230" y="355" />
        <di:waypoint x="230" y="149" />
        <di:waypoint x="400" y="149" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="245" y="123" width="90" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="SequenceFlow_09x881f_di" bpmnElement="SequenceFlow_09x881f">
        <di:waypoint x="450" y="260" />
        <di:waypoint x="450" y="189" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="SequenceFlow_11kuwz4_di" bpmnElement="SequenceFlow_11kuwz4">
        <di:waypoint x="798" y="300" />
        <di:waypoint x="853" y="300" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="SequenceFlow_0b662wc_di" bpmnElement="SequenceFlow_0b662wc">
        <di:waypoint x="583" y="207" />
        <di:waypoint x="583" y="300" />
        <di:waypoint x="500" y="300" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="SequenceFlow_0y7etgt_di" bpmnElement="SequenceFlow_0y7etgt">
        <di:waypoint x="500" y="149" />
        <di:waypoint x="556" y="149" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="SequenceFlow_1i87eit_di" bpmnElement="SequenceFlow_1i87eit">
        <di:waypoint x="178" y="380" />
        <di:waypoint x="205" y="380" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNShape id="_BPMNShape_StartEvent_2" bpmnElement="startEvent">
        <dc:Bounds x="142" y="362" width="36" height="36" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="ExclusiveGateway_0vh9q2m_di" bpmnElement="resolveSequence" isMarkerVisible="true">
        <dc:Bounds x="205" y="355" width="50" height="50" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="356" y="220" width="27" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="EndEvent_1xbkvnk_di" bpmnElement="endEvent3">
        <dc:Bounds x="853" y="452" width="36" height="36" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="SendTask_0y2l6xv_di" bpmnElement="placeTpNetDepositTask">
        <dc:Bounds x="400" y="109" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="ReceiveTask_0x3urzg_di" bpmnElement="receiveTpNetDepositSuccessTask">
        <dc:Bounds x="556" y="109" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="SendTask_1m8vmbt_di" bpmnElement="createTpNetDepositItsmTicketTask">
        <dc:Bounds x="698" y="260" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="EndEvent_1h6cvlz_di" bpmnElement="endEvent2">
        <dc:Bounds x="853" y="282" width="36" height="36" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="UserTask_15vaoan_di" bpmnElement="tpNetDepositHumanTask">
        <dc:Bounds x="400" y="260" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="SendTask_1afswsa_di" bpmnElement="placeTpNetGiveAwayTask">
        <dc:Bounds x="400" y="430" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="ReceiveTask_0nc6jmo_di" bpmnElement="receiveTpNetGiveAwaySuccessTask">
        <dc:Bounds x="567" y="430" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="UserTask_16m2uct_di" bpmnElement="tpNetGiveAwayHumanTask">
        <dc:Bounds x="400" y="599" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="SendTask_1cn6dft_di" bpmnElement="createTpNetGiveAwayItsmTicketTask">
        <dc:Bounds x="698" y="599" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="EndEvent_1t8s0vk_di" bpmnElement="endEvent4">
        <dc:Bounds x="853" y="621" width="36" height="36" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="EndEvent_0ocw8ka_di" bpmnElement="endEvent1">
        <dc:Bounds x="853" y="131" width="36" height="36" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="BoundaryEvent_1rhzmjz_di" bpmnElement="receiveTpNetSuccessGiveAwayTimer">
        <dc:Bounds x="622" y="492" width="36" height="36" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="653" y="529" width="34" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="BoundaryEvent_0d5vhcb_di" bpmnElement="receiveTpNetGiveAwayFailTask">
        <dc:Bounds x="575" y="492" width="36" height="36" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="503" y="536" width="74" height="27" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="BoundaryEvent_03amnvh_di" bpmnElement="receiveTpNetDepositFailTask">
        <dc:Bounds x="565" y="171" width="36" height="36" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="506" y="208" width="67" height="27" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="BoundaryEvent_1sxo76s_di" bpmnElement="receiveTpNetSuccessDepositTimer">
        <dc:Bounds x="613" y="171" width="36" height="36" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="644" y="208" width="34" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
    </bpmndi:BPMNPlane>
  </bpmndi:BPMNDiagram>
</bpmn:definitions>
